# Candidate title/concept mentions

This folder contains data files generated by the remarx-candidate-mentions script,
which finds sentences that contain phrases of interest (e.g., title or concept references)
ignoring inflection and capitalization.

## Files
- title_mentions: results from several title phrases run across three text files; these are the same files used in title subset annotation data; see [title_searchphrases.csv](../title_searchphrases.csv) for the list of titles and corresponding search phrases.
- concept_mentions: results from a few concept phrases run against all 25 text files


## Della Setup

The title_mentions and concept_mentions files were generated by running the candidate-mentions
script on Della (Princeton HPC) using the following setup.

1. Create a new python 3.12 environment and install the `remarx` package
from this experimental branch on GitHub:

```console
module load anaconda3/2024.6
conda create -n marx python=3.12
pip install git+https://github.com/Princeton-CDH/citing-marx.git@experiments/trad-nlp
```

2. Configure and download Stanza resources for offline use. First,
customize the default directory to store resources on scratch:

```console
export STANZA_RESOURCES_DIR=/scratch/gpfs/$USER/.stanza_resources/
```

Then use the python console to download the data:

```python
>>> from remarx.candidate_mentions import LANG, PROCS
>>> from stanza import DownloadMethod, Pipeline
>>> pipeline = Pipeline(lang=LANG, processors=PROCS, download_method=DownloadMethod.REUSE_RESOURCES)
```

3. Make a directory with the text files for input. 

4. Copy and customize the [candidate-mentions.slurm](candidate-mentions.slurm) 
file to use the appropriate paths, input directories, output files and search phrases. 
Queue the job with `sbatch candidate-mentions.slurm`.